"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7],{7427:(e,t,r)=>{r.r(t),r.d(t,{default:()=>q});var a=r(1519),l=r(5118),n=r(7401),o=r(3398),c=r.n(o),i=r(4127),d=r(1686),s=r(1856),u=r(1887),m=r(3100),p=r(2675),g=r(6679),E=r(7636),f=r(8462),y=r(352),h=r(4671),b=r(1183),v=r(8644),_=r(4092),x=r(6024),O=r(5077),P=r(7484),S=r(1673),C=r(6321);const I=({product:e})=>{const{formatMessage:t}=(0,d.Z)();return n.createElement(p.K,{direction:"row",spacing:[0,0,0,16]},n.createElement(x.U,{allowMultiple:!0,maxWidth:"896px",flex:[1,1,1,5]},n.createElement(O.Q,null,n.createElement("h2",null,n.createElement(P.K,{height:"64px"},n.createElement(m.xu,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Product Detail"}],id:"product_detail.accordion.button.product_detail"})),n.createElement(S.X,null))),n.createElement(C.H,{mb:6,mt:4},n.createElement("div",{dangerouslySetInnerHTML:{__html:null==e?void 0:e.longDescription}}))),n.createElement(O.Q,null,n.createElement("h2",null,n.createElement(P.K,{height:"64px"},n.createElement(m.xu,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Size & Fit"}],id:"product_detail.accordion.button.size_fit"})),n.createElement(S.X,null))),n.createElement(C.H,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"}))),n.createElement(O.Q,null,n.createElement("h2",null,n.createElement(P.K,{height:"64px"},n.createElement(m.xu,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Reviews"}],id:"product_detail.accordion.button.reviews"})),n.createElement(S.X,null))),n.createElement(C.H,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"}))),n.createElement(O.Q,null,n.createElement("h2",null,n.createElement(P.K,{height:"64px"},n.createElement(m.xu,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Questions"}],id:"product_detail.accordion.button.questions"})),n.createElement(S.X,null))),n.createElement(C.H,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"})))),n.createElement(m.xu,{display:["none","none","none","block"],flex:4}))};I.propTypes={product:c().object};const L=I;var w=r(7182),T=r(1486),D=r(4753),M=r(598),j=r(1598);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const A=()=>{const{formatMessage:e}=(0,d.Z)(),t=(0,D.k6)(),r=(0,D.TH)(),a=(0,h.Z)(),o=(0,M.p)(),c=(0,y.Z)(),[x,O]=(0,n.useState)({}),P=n.useRef({}),S=(0,g.useCustomerId)(),{data:C}=(0,E.Q)(),I=(0,g.useShopperBasketsMutation)("addItemToBasket"),{res:k}=(0,b.useServerContext)();k&&k.set("Cache-Control",`max-age=${w.RU}`);const{productId:A}=(0,D.UO)(),q=new URLSearchParams(r.search),{data:W,isLoading:K}=(0,g.useProduct)({parameters:{id:q.get("pid")||A,allImages:!0}},{keepPreviousData:!0}),H=null==W?void 0:W.type.set,{data:V}=(0,g.useCategory)({parameters:{id:null==W?void 0:W.primaryCategoryId,level:1}}),[z,N]=(0,n.useState)(V),Q=(0,f.c1)(W);(0,n.useEffect)((()=>{V&&N(V)}),[V]),(0,n.useEffect)((()=>{if(!Q)return;const e=(0,T.DE)(`${r.pathname}${r.search}`,{pid:null==Q?void 0:Q.productId});t.replace(e)}),[Q]);const{data:R,isLoading:U}=(0,j.L)(),F=(0,g.useShopperCustomersMutation)("createCustomerProductListItem"),B=(t,r,a)=>{F.mutate({parameters:{listId:R.id,customerId:S},body:{quantity:a,productId:(null==r?void 0:r.productId)||(null==t?void 0:t.id),public:!1,priority:1,type:"product"}},{onSuccess:()=>{o({title:e(w.Zy,{quantity:1}),status:"success",action:n.createElement(u.z,{variant:"link",onClick:()=>c("/account/wishlist")},e(w.GN))})},onError:()=>{$()}})},X=(0,M.p)(),$=()=>{X({title:e(w.oj),status:"error"})},G=function(){var e=(0,l.Z)((function*(e){try{const t=e.map((({variant:e,quantity:t})=>({productId:e.productId,price:e.price,quantity:t})));return yield I.mutateAsync({parameters:{basketId:C.basketId},body:t}),a.sendAddToCart(t),e}catch(e){$(e)}}));return function(t){return e.apply(this,arguments)}}(),Y=(0,n.useCallback)((()=>{Object.values(P.current).forEach((({validateOrderability:e})=>{e({scrollErrorIntoView:!1})}));const e=Object.keys(x),t=W.setProducts.find((({id:t})=>!e.includes(t)));if(t){const{ref:e}=P.current[t.id];return e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"end"}),!1}return!0}),[W,x]);return(0,n.useEffect)((()=>{W&&W.type.set?(a.sendViewProduct(W),W.setProducts.map((e=>{a.sendViewProduct(e)}))):W&&a.sendViewProduct(W)}),[W]),n.createElement(m.xu,{className:"sf-product-detail-page",layerStyle:"page","data-testid":"product-details-page"},n.createElement(i.q,null,n.createElement("title",null,null==W?void 0:W.pageTitle),n.createElement("meta",{name:"description",content:null==W?void 0:W.pageDescription})),n.createElement(p.K,{spacing:16},H?n.createElement(n.Fragment,null,n.createElement(_.Z,{product:W,category:(null==z?void 0:z.parentCategoryTree)||[],addToCart:()=>{const e=Object.values(x);return G(e)},addToWishlist:B,isProductLoading:K,isWishlistLoading:U,validateOrderability:Y}),n.createElement("hr",null),W.setProducts.map((e=>n.createElement(m.xu,{key:e.id,"data-testid":"child-product"},n.createElement(_.Z,{ref:function(t){P.current[e.id]={ref:t,validateOrderability:this.validateOrderability}},product:e,isProductPartOfSet:!0,addToCart:(t,r)=>G([{product:e,variant:t,quantity:r}]),addToWishlist:B,onVariantSelected:(e,t,r)=>{if(r)O((a=>Z(Z({},a),{},{[e.id]:{product:e,variant:t,quantity:r}})));else{const t=Z({},x);delete t[e.id],O(t)}},isProductLoading:K,isWishlistLoading:U}),n.createElement(L,{product:e}),n.createElement(m.xu,{display:["none","none","none","block"]},n.createElement("hr",null)))))):n.createElement(n.Fragment,null,n.createElement(_.Z,{product:W,category:(null==z?void 0:z.parentCategoryTree)||[],addToCart:(e,t)=>G([{product:W,variant:e,quantity:t}]),addToWishlist:B,isProductLoading:K,isWishlistLoading:U}),n.createElement(L,{product:W})),n.createElement(p.K,{spacing:16},!H&&n.createElement(v.Z,{title:n.createElement(s.Z,{defaultMessage:[{type:0,value:"Complete the Set"}],id:"product_detail.recommended_products.title.complete_set"}),recommender:w.xq.PDP_COMPLETE_SET,products:[W],mx:{base:-4,md:-8,lg:0},shouldFetch:()=>null==W?void 0:W.id}),n.createElement(v.Z,{title:n.createElement(s.Z,{defaultMessage:[{type:0,value:"You might also like"}],id:"product_detail.recommended_products.title.might_also_like"}),recommender:w.xq.PDP_MIGHT_ALSO_LIKE,products:[W],mx:{base:-4,md:-8,lg:0},shouldFetch:()=>null==W?void 0:W.id}),n.createElement(v.Z,{title:n.createElement(s.Z,{defaultMessage:[{type:0,value:"Recently Viewed"}],id:"product_detail.recommended_products.title.recently_viewed"}),recommender:w.xq.PDP_RECENTLY_VIEWED,mx:{base:-4,md:-8,lg:0}}))))};A.getTemplateName=()=>"product-detail",A.propTypes={match:c().object};const q=A}}]);